<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>TeamKP VM Registration</title>

    <!-- Bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <!--<link href="static/css/bootstrap.min.css" rel="stylesheet">-->
    <link href="/static/css/style.css" rel="stylesheet">
  </head>
  <body>

  <div class='container'>
  <div class='row'>
    <div class='col-md-12 text-center'>
      <h1>Hello World Tutorial</h1>
      {% if 'username' in request.cookies %}
      {{request.cookies.username}}@{{request.cookies.vm_name}}
      {% endif %}
    </div>
  </div>
 <div class='row'>
    <div class='col-md-12'>
      <ul id="progressbar">
        <li class='active'><a href='/'>Register</a></li>
        <li class='active'><a href='/vpn_setup'>VPN Setup</a></li>
        <li class='active'><a href='/hello_world'>Hello World Tutorial</a></li>
        <li class='active'><a href='/rest_api'>REST API Tutorial</a></li>
        <li>Start Working</li>
      </ul>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-12'>
      &nbsp;
    </div>
  </div>
  <!-- HR -->
  <div class='row'><div class='col-12'><hr/></div></div>
  <!--/HR -->
  <div class='row'>
    <div class='col-md-1'>
       <span class='giant'>5</span>
    </div>
    <div class='col-md-11'>
      <p>We are going to build an API to manage a fleet of self driving cars.</p>

      <p>We will use the REST paradigm coupled with the BREAD acryonm.  If you've never heard of
         these then I wouldn't stress about it.  You'll know it very well at the end of this.</p>

      <p>This first step we are going to look at how the database needs to be setup.</p>

      <p>We are going to need a list of the self driving cars, a list of passengers and their destinations:</p>

      <h2>car</h2>

      <p>
        <table class='table table-bordered table-dark'>
          <thead>
           <tr>
            <th scope='col'>#</th>
            <th scope='col'>make</th>
            <th scope='col'>model</th>
            <th scope='col'>year</th>
            <th scope='col'>mileage</th>
            <th scope='col'>active</th>
           </tr>
          </thead>
          <tbody>
            <tr>
              <th scope='row'>1</th>
              <td>Tesla</td>
              <td>Model 27</td>
              <td>2021</td>
              <td>13,784</td>
              <td>1</td>
            </tr>
            <tr>
              <th scope='row'>2</th>
              <td>Google</td>
              <td>PixelCar Beta</td>
              <td>2018</td>
              <td>35,741</td>
              <td>1</td>
            </tr>
            <tr>
              <th scope='row'>3</th>
              <td>Apple</td>
              <td>Model XX</td>
              <td>2019</td>
              <td>1,337</td>
              <td>1</td>
            </tr>
          </tbody>
        </table>
      </p>

      <h2>passenger</h2>

      <p>
        <table class='table table-bordered table-dark'>
          <thead>
           <tr>
            <th scope='col'>#</th>
            <th scope='col'>name</th>
            <th scope='col'>active</th>
           </tr>
          </thead>
          <tbody>
            <tr>
              <th scope='row'>1</th>
              <td>Keanu Reeves</td>
              <td>1</td>
            </tr>
            <tr>
              <th scope='row'>2</th>
              <td>Laurence Fishburne</td>
              <td>1</td>
            </tr>
            <tr>
              <th scope='row'>3</th>
              <td>Carrie-Anne Moss</td>
              <td>1</td>
            </tr>
          </tbody>
        </table>
      </p>

      <h2>destination</h2>

      <p>
        <table class='table table-bordered table-dark'>
          <thead>
           <tr>
            <th scope='col'>#</th>
            <th scope='col'>street</th>
            <th scope='col'>city</th>
            <th scope='col'>state</th>
            <th scope='col'>zip</th>
            <th scope='col'>active</th>
           </tr>
          </thead>
          <tbody>
            <tr>
              <th scope='row'>1</th>
              <td>6801 Hollywood Blvd.</td>
              <td>Los Angeles</td>
              <td>CA</td>
              <td>90028</td>
              <td>1</td>
            </tr>
            <tr>
              <th scope='row'>2</th>
              <td>3400 Warner Blvd.</td>
              <td>Burbank</td>
              <td>CA</td>
              <td>91522</td>
              <td>1</td>
            </tr>
            <tr>
              <th scope='row'>3</th>
              <td>6801 Hollywood Blvd</td>
              <td>Hollywood</td>
              <td>CA</td>
              <td>90028</td>
              <td>1</td>
            </tr>
          </tbody>
        </table>
      </p>

      <p>Now we need a way to 'relate' these tables together.  We are going to do a Trip table that
         stores the ids of the car, passenger and destination, as well as the date and time of the
         start and end of the trip.</p>

      <h2>trip</h2>

      <p>
        <table class='table table-bordered table-dark'>
          <thead>
           <tr>
            <th scope='col'>#</th>
            <th scope='col'>car_id</th>
            <th scope='col'>passenger_id</th>
            <th scope='col'>destination_id</th>
            <th scope='col'>trip_start_time</th>
            <th scope='col'>trip_end_time</th>
           </tr>
          </thead>
          <tbody>
            <tr>
              <th scope='row'>1</th>
              <td>1</td>
              <td>1</td>
              <td>1</td>
              <td>2018-01-14 07:14:12</td>
              <td>2018-01-14 07:23:01</td>
            </tr>
            <tr>
              <th scope='row'>2</th>
              <td>2</td>
              <td>3</td>
              <td>2</td>
              <td>2018-01-14 13:47:39</td>
              <td>2018-01-14 14:01:17</td>
            </tr>
            <tr>
              <th scope='row'>3</th>
              <td>3</td>
              <td>2</td>
              <td>3</td>
              <td>2018-01-14 06:01:53</td>
              <td>2018-01-14 07:41:19</td>
            </tr>
          </tbody>
        </table>
      </p>

      <p>So that first row in the trip table shows that Keanu Reeves took the Tesla to 6801 Hollywood Blvd.  Which must
         mean he is very vane since that is where his Hollywood "walk of fame" star is located.  Now let's build this as
         a SQL Script named load_sql.py
      </p>

      <p><pre class='prettyprint lang-bash'>
vim load_sql.py</pre></p>

      <p>If you didn't do the Hello World Tutorial, the vim text editor is built in to most linux
         distributions.  If it isn't installed than it's older bother `vi` is installed and you can
         install vim with one or two commands.  I say this to say that learning vim will benefit you
         in your career.  Vim has two primary modes.  Normal mode and Insert mode.  When you first
         load Vim it is in Normal mode which is designed for using hot keys. To get into Insert mode
         you can press the `i` key.  Then you should be able to copy paste.  If you are using putty.exe
         right click is the paste.

      <p>And let's add the following:</p>

      <p><pre class='prettyprint lang-python'>
#!/usr/bin/python3

# Imported libraries
import sqlite3
import os

# We want to remove the existing file
try:
    os.remove('sql.db')
except OSError as e:
    print("Couldn't remove the file:", e.strerror)

# The sql connection &amp; cursor
conn = sqlite3.connect('sql.db')
c = conn.cursor()

print("Processing tables")

# Make the cars =============================================================
print("==&gt; Cars")
c.execute('''CREATE TABLE IF NOT EXISTS car
             (   make TEXT,
                model TEXT,
                 year INTEGER,
              mileage INTEGER,
               active INTEGER)''')

# Let's load some data
c.execute('''INSERT INTO car VALUES (?, ?, ?, ?, ?)''',
          ('Tesla', 'Model 27', 2021, 13784, 1))
c.execute('''INSERT INTO car VALUES (?, ?, ?, ?, ?)''',
          ('Google', 'PixelCar Beta', 2018, 35741, 1))
c.execute('''INSERT INTO car VALUES (?, ?, ?, ?, ?)''',
          ('Apple', 'Model XX', 2019, 1337, 1))</pre></p>

    <p>To exit insert mode and save the file press Escape and then press `:wq`.</p>

    <p>Let's talk through the different sections of this file.</p>

    <p><pre class='prettyprint lang-python'>
#!/usr/bin/python3</pre></p>

    <p>This line tells the server which program to use to run this file.  In our case we are using
       the python3 program to interpret/run the file.  This line is called the `shebang`.  I'm
       honestly not sure why we call it that (neither is Wikipedia) but if you Google
       `shebang python` you'll see that I'm not crazy.  I think it's because we are in the `Shell`
       and in the old days of typing the ! was called a `bang` and over time it was shortened
       to `shebang` but I'm just guessing.  When I started coding the # was called a `pound` and
       not a `hashtag`. The astrisk (*) at one point was called a `splat` and the slash (/) was
       called a `whack`.  Old people really had fun with typing.</p>

    <p><pre class='prettyprint lang-python'>
# Imported libraries
import sqlite3
import os</pre></p>

    <p>We are importing two Python libraries into our code.  By doing this we can access
       any of the functions or variables defined in these libraries (also called modules).
       We are actually going to build or own module in the next couple of steps.</p>

    <p><pre class='prettyprint lang-python'>
# We want to remove the existing file
try:
    os.remove('sql.db')
except OSError as e:
    print("Couldn't remove the file:", e.strerror)</pre></p>

    <p>This removes the file so we can start fresh.  We use a try/ except: block to protect us from
       the OS having an issue finding or removeing the file.  If it goes wrong the user will
       get a message telling them why.  os.remove() actually does the dirty work of taking the file
       out.  He's basically the hitman for Python files.  What you looking at?</p>

    <p><pre class='prettyprint lang-python'>
# The sql connection &amp; cursor
conn = sqlite3.connect('sql.db')
c = conn.cursor()

print("Processing tables")</pre></p>

    <p><pre class='prettyprint lang-python'>
# Make the cars =============================================================
print("==&gt; Cars")
c.execute('''CREATE TABLE IF NOT EXISTS car
             (   make TEXT,
                model TEXT,
                 year INTEGER,
              mileage INTEGER,
               active INTEGER)''')</pre></p>

    <p><pre class='prettyprint lang-python'>
# Let's load some data
c.execute('''INSERT INTO car VALUES (?, ?, ?, ?, ?)''',
          ('Tesla', 'Model 27', 2021, 13784, 1))
c.execute('''INSERT INTO car VALUES (?, ?, ?, ?, ?)''',
          ('Google', 'PixelCar Beta', 2018, 35741, 1))
c.execute('''INSERT INTO car VALUES (?, ?, ?, ?, ?)''',
          ('Apple', 'Model XX', 2019, 1337, 1))</pre></p>

    </div>
  </div>

  <!-- End of tutorial -->
  <div class='row'>
    <div class='col-md-12'>
      &nbsp;
    </div>
  </div>
  </div> <!-- End container -->

<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
  </body>
</html>
